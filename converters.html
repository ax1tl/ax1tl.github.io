<link href="convertStyle.css" rel="stylesheet" type="text/css" media="all">
<link rel="javascript" href="javascript.js" type="text/javascript" media="all">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap" rel="stylesheet">

<html>
<!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0SP9PQQ9FF"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-0SP9PQQ9FF');
    </script>

    <head>
        <title>ax1.converters</title>
        <link rel="icon" type="image/png" href="images/converter site icon.png"/>
    </head>

    <body>
        <div class="input">
            Input:
            <input class="inBox" type="text" id="inBase+" placeholder="any" oninput="toBasePlus(this.value)">
            from Base:
            <input class="inBox" type="text" id="fromBase+" placeholder="2-64" min="2" max="64" oninput="toBasePlus(this.value)">
            to Base:
            <input class="inBox" type="text" id="toBase+" placeholder="2-64" min="2" max="64" oninput="toBasePlus(this.value)"> 
        </div>

        <div class="outBox">
            <script type="text/javascript">
                function toBasePlus(){
                    value = document.getElementById("inBase+").value;
                    from_base = document.getElementById("fromBase+").value;
                    to_base = document.getElementById("toBase+").value;

                    var range = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_'.split('');
                    var from_range = range.slice(0, from_base);
                    var to_range = range.slice(0, to_base);
                                    
                    var dec_value = value.split('').reverse().reduce(function (carry, digit, index) {
                      if (from_range.indexOf(digit) === -1) throw new Error('Invalid digit `'+digit+'` for base '+from_base+'.');
                      return carry += from_range.indexOf(digit) * (Math.pow(from_base, index));
                    }, 0);
                    
                    var new_value = '';
                    while (dec_value > 0) {
                        if (to_base < 2){
                            to_base = 2;

                            new_value = to_range[dec_value % to_base] + new_value;
                            dec_value = (dec_value - (dec_value % to_base)) / to_base;

                            to_base = 1;
                        }
                        else{
                            new_value = to_range[dec_value % to_base] + new_value;
                            dec_value = (dec_value - (dec_value % to_base)) / to_base;
                        }
                    }
                    document.getElementById("demo+").innerHTML = (new_value);

                    if (to_base < 2 || to_base > 64 || from_base < 2 || from_base > 64){
                        document.getElementById("demo+").innerHTML = ("ERROR");
                    }
                }
            </script>

            <div class="default">0x</div>
            <div id="demo+" class="result">0</div>
        </div>
    </body>
</html>
