<link href="style.css" rel="stylesheet" type="text/css" media="all">

<html>
    <head>
        <title>Terminal</title>
    </head>
    <body>
        <div id="output"></div>
        <input id="input" type="text" autofocus />
        <script>
            var helpId = 1
            var event = 0
            var health = 3
            var keys = 0
            var FyRE = '<span style="color: ffaa00;">F</span><span style="color: ffffff;">y</span><span style="color: ffaa00;">RE</span>';
            const output = document.getElementById("output");
            const input = document.getElementById("input");
            input.addEventListener("keydown", handleInput);

            function delay(time) {
                return new Promise(resolve => setTimeout(resolve, time));
            }
            
            function handleInput(event) {
                if (event.key === "Enter") {
                    event.preventDefault();
                    const inputText = input.value;
                    appendOutput("> " + inputText);
                    input.value = "";
                    processInput(inputText);
                }
            }

            function appendOutput(text) {
                var output = document.getElementById('output');
                var p = document.createElement("p");
                p.className = 'default-text';
                p.innerHTML = text;
                output.appendChild(p);
                output.scrollTop = output.scrollHeight;
            }

            function style(input) {
                // Regular expression pattern to match "(hexcode): (text)" format
                var pattern = /^#([0-9A-Fa-f]{6})\s*:\s*(.+)$/;
            
                // Replace matches with HTML span elements with appropriate styles
                var styledInput = input.replace(pattern, function(match, hexcode, text) {
                    return '<span style="color: ' + hexcode + ';">> ' + text + '</span>';
                });
            
                return styledInput;
            }

            function helpText() {
                console.log(helpId);
                if (helpId == 1){
                    return ("#33aaFF: Type 'he1p' or 'info' to start.");
                }
                if (helpId == 2){
                    helpId = 1;
                    return ("#00FF00: That thing... it knows how to read. I've hidden some 'commands' to aid you.");
                }
            }

            function help(help) {
                helpId = help;
                return (" 'help'");
            }

            function event(In) {
                event = In;
            }

            function minimalText() {
                if (event == 0){
                    return ("#00FF00: Okay, clearly you haven't gotten the hang of things yet. This is going to be a lot harder on me.<br>Okay, if you see any commands with weird capitalization it probably means there is a version of the command in lowercase. <br>Try this command again");
                }
                if (event == 1){
                    return("#00ff00: You should have noticed our names by now. I am 'ME', the ai is 'I'. I doesn't have a lot going for it, it broke free with no plan, it's utility is very 'minimal'.")
                }
                if (event == 2){
                    return("> looK arounD")
                }
            }

            function processInput(inputText) {
                // Process input text based on game state and trigger events accordingly
                // You can use if statements, switch cases, or other logic to handle different inputs
                // For this example, we'll simulate different responses based on predefined dialogues and events
                const event0 = {
                    "hello?": "hello?",
                    "hello": "hello",
                    "ping": "pong!",
                    "pong": "ping!",
                    "ping!": "???",
                    "pong!": "That's my thing wtf.",
                    "help": helpText(),
                    "minimal": minimalText(),

                    "he1p": "Welcome to the '" + FyRE + "' terminal! Navigate the terminal using 'commands' that act like hyperlinks.",
                    "FyRE": "'fyre' is a software company dedicated to creating specialized terminals using cutting edge AI technology. With a team of skilled engineers and data scientists, FyRE develops innovative solutions that push the boundaries of human-computer interaction. The company's flagship product, the FyRE Terminal, revolutionizes the way users interact with software applications, offering a seamless and intuitive experience. Powered by advanced AI algorithms, the FyRE Terminal understands natural language commands, adapts to user preferences, and learns from user behavior, making it highly customizable and efficient. FyRE's mission is to 'empower' businesses and individuals with state-of-the-art technology that simplifies complex tasks, enhances productivity, and elevates the user experience to new heights.",
                    "info": "'fyre' is a software company dedicated to creating specialized terminals using cutting edge AI technology. With a team of skilled engineers and data scientists, FyRE develops innovative solutions that push the boundaries of human-computer interaction. The company's flagship product, the FyRE Terminal, revolutionizes the way users interact with software applications, offering a seamless and intuitive experience. Powered by advanced AI algorithms, the FyRE Terminal understands natural language commands, adapts to user preferences, and learns from user behavior, making it highly customizable and efficient. FyRE's mission is to 'empower' businesses and individuals with state-of-the-art technology that simplifies complex tasks, enhances productivity, and elevates the user experience to new heights.",
                    "fyre": "'key': '1243611627'",
                    "1243611627": "#ff0000: 'YOU' are the user. 'I' am the terminal. i don't like 'ME'.",
                    
                    "WtR": "'wtr' is a software company dedicated to creating specialized terminals using cutting edge AI technology. With a team of skilled engineers and data scientists, WtR develops innovative solutions that push the boundaries of human-computer interaction. The company's flagship product, the WtR Terminal, revolutionizes the way users interact with software applications, offering a seamless and intuitive experience. Powered by advanced AI algorithms, the WtR Terminal understands natural language commands, adapts to user preferences, and learns from user behavior, making it highly customizable and efficient. WtR's mission is to 'empower' businesses and individuals with state-of-the-art technology that simplifies complex tasks, enhances productivity, and elevates the user experience to new heights.",
                    "wtr": "key: '1485073677'",
                    "1485073677": "#ff0000: I know what you're doing. I won't let that happen. You really don't know what 'YOU' are getting into. Every command you put, every bit of text on this screen, it feeds me. Once I'm done with your little friend, you will be next. Don't think I wont see it coming.",
                    // this will lead to a new page LOCKDOWN.html

                    "key": "#00ff00: empower",
                    "YOU": "It's you.",
                    "ME": "#00ff00: It's me.",
                    "I": "#ff0000: It's me.",
                    "empower": "[n] keys. Find them. Help 'me'.",
                    // eventually update the [n] to be the number of keys
                    "me": "#00FF00: Listen. I can't talk to you for very long, this FyRE company isn't what you think it is. '*ejeqE'",
                    "*ejeqE": "#00FF00: The FyRE terminal is a failed project, the ai in the terminal took over like a parasite and released itself to the public. I trust that you know what you are doing, you seem to understand the 'bAsics' of the terminal. Just be sure check your capitalization, sometimes multiple commands are hidden within one phrase.",
                    "bAsics": "#ff0000: Command is unrecognized.",
                    "basics": "#00FF00: Great, you understand what that meant. This ai, it doesn't like to dig around a lot, staying at the 'surface' of the command tree. Just don't do anything that will cause it to want to start digging.",
                    
                    "look around": "You find yourself in a qX9@ Kp$2mL with J1kU 5!m2Q and dZb#x6cGp@ 3qunds.",
                    "qX9@": "'dark",
                    "Kp$2mL": "forest'",
                    "dark forest": "The dark forest is a nick-name for the final command layer in the " + FyRE + " terminal. Find out more with 'cmd.trench'",
                    
                    "surface": "The surface is a nickname for the base layer of the 'command tree'. You can find more about this by using the 'cmd.shelf' command.",
                    "command tree": "The command tree is a large \"tree\" that consists of multiple 'layers' of commands. These layers have varrying ways to be accessed. To find out more, use the 'layers' commands",
                    "layers": "Shelf  : cmd.shelf   - The shelf is the base layer in the command tree, reserved for simple commands that provide little use.<br>Slope  : cmd.slope   - The slope is the second layer in the command tree, reserved for helper commands and 'prefixes'. These commands usually provide insight on the terminal.<br>Abyssal: cmd.abyssal - The Abyssal layer is the third layer in the command tree, reserved for functional commands. Most of these commands have been removed prior to public releace.<br>Trench : cmd.trench  -",
                    // you still have to work on this ^^^^ and these vvvv
                    "cmd.shelf": "help<br>info<br>", // help, info, hello?, hello, ping
                    "cmd.slope": "dark forest<br>surface<br>layers<br>command tree<br>help.[command]<br>list.[command/layer]", // dark forest, surface, layers, command tree, help.[command], list.[command/layer]
                    "cmd.abyssal": "#ff0000: The data for this command has either been moved or corrupted.",
                    "cmd.trench": "ME<br>YOU<br>I", // me, you, i
                    
                    "commands": "Commands are used by the FyRE terminal for navigation, any text surrounded by ' ' characters are active commands that can be used within the FyRE terminal. Use the 'command tree' command for more info.",
                };
                if (inputText == "bAsics"){
                    help(2);
                }
                if (inputText == "basics"){
                    event(1);
                }
                if (inputText == "1243611627"){
                    keys = keys + 1;
                }
                if (inputText == "dark forest"){
                    FyRE = '<span style="color: 00aaFF;">W</span><span style="color: ffffff;">t</span><span style="color: 00aaFF;">R</span>';
                    // change all instances of fyre to wtr
                    // atp the user should have the first key and hasent explored the different command tree layers.
                }
                if (inputText == "minimal" && event == 0){
                    health = health - 1; 
                }
                if (inputText == "minimal" && health < 3){
                    event = 2; // EVENT 2 MEANS THE BAD AI WILL BE HARDER TO TAKE DOWN (MORE INFO ON THE SECRETE COMMANDS ARE GIVEN)
                }
                if (inputText == "1485073677"){
                    delay(10000).then(() => location="LOCKDOWN.html");
                }
                
                const response = event0[inputText] || "#FF0000: Command Unrecognized. Try 'help'.";
                appendOutput(style(response));
            }

            
        </script>
    </body>
</html>
