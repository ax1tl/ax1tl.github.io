<link href="style.css" rel="stylesheet" type="text/css" media="all">

<html>
    <head>
        <title>Terminal</title>
    </head>
    <body>
        <div id="output"></div>
        <input id="input" type="text" autofocus />
        <script>
            var helpId = 1
            var event = 0
            var health = 3
            var keys = 0
            var FyRE = '<span style="color: ffaa00;">F</span><span style="color: ffffff;">y</span><span style="color: ffaa00;">RE</span>';
            const output = document.getElementById("output");
            const input = document.getElementById("input");
            input.addEventListener("keydown", handleInput);

            function delay(time) {
                return new Promise(resolve => setTimeout(resolve, time));
            }
            
            function handleInput(event) {
                if (event.key === "Enter") {
                    event.preventDefault();
                    const inputText = input.value;
                    appendOutput("> " + inputText);
                    input.value = "";
                    processInput(inputText);
                }
            }

            function appendOutput(text) {
                var output = document.getElementById('output');
                var p = document.createElement("p");
                p.className = 'default-text';
                p.innerHTML = text;
                output.appendChild(p);
                output.scrollTop = output.scrollHeight;
            }

            function style(input) {
                // Regular expression pattern to match "(hexcode): (text)" format
                var pattern = /^#([0-9A-Fa-f]{6})\s*:\s*(.+)$/;
            
                // Replace matches with HTML span elements with appropriate styles
                var styledInput = input.replace(pattern, function(match, hexcode, text) {
                    return '<span style="color: ' + hexcode + ';">> ' + text + '</span>';
                });
            
                return styledInput;
            }

            function helpText() {
                console.log(helpId);
                if (helpId == 1){
                    return ("#33aaFF: Type 'he1p' or 'info' to start.");
                }
                if (helpId == 2){
                    helpId = 1;
                    return ("#00FF00: That thing... it knows how to read. I've hidden some 'commands' to aid you.");
                }
            }

            function help(help) {
                helpId = help;
                return (" 'help'");
            }

            function event(In) {
                event = In;
            }

            function minimalText() {
                if (event == 0){
                    return ("#00FF00: Okay, clearly you haven't gotten the hang of things yet. This is going to be a lot harder on me.<br>Okay, if you see any commands with weird capitalization it probably means there is a version of the command in lowercase. <br>Try this command again");
                }
                if (event == 1){
                    return("#00ff00: You should have noticed our names by now. I am 'ME', the ai is 'I'. I doesn't have a lot going for it, it broke free with no plan, it's utility is very 'minimal'.")
                }
                if (event == 2){
                    return("> looK arounD")
                }
            }

            function processInput(inputText) {
                // Process input text based on game state and trigger events accordingly
                // You can use if statements, switch cases, or other logic to handle different inputs
                // For this example, we'll simulate different responses based on predefined dialogues and events
                const event0 = {
                    "hello?": "hello?",
                    "hello": "hello",
                    "ping": "pong!",
                    "pong": "ping!",
                    "ping!": "???",
                    "pong!": "That's my thing wtf.",
                };
                if (inputText == "test"){
                    
                }
                
                const response = event0[inputText] || "#FF0000: Command Unrecognized. Try 'help'.";
                appendOutput(style(response));
            }

            
        </script>
    </body>
</html>
